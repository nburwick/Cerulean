<!DOCTYPE html>
<html>
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.3.2/chart.min.js"></script>
</head>
<body>
  <canvas id="lineChart"></canvas>

  <script>
    // Assuming you have loaded the GeoJSON data into a variable called 'data'
    var state = "st"; // Replace with your desired state
    var year = "yr"; // Replace with your desired year
    var month = "mo"; // Replace with your desired month

    // Filter the data for the given state, year, and month
    var filteredData = data.features.filter(function(feature) {
      return (
        feature.properties.State === state &&
        feature.properties.Year === year &&
        feature.properties.Month === month
      );
    });

    // Calculate the sum of events for each month
    var eventCounts = [];
    for (var i = 1; i <= 12; i++) {
      var count = filteredData.reduce(function(acc, feature) {
        if (feature.properties.Month === i.toString()) {
          return acc + feature.properties.Events.length;
        }
        return acc;
      }, 0);
      eventCounts.push(count);
    }

    // Create a line chart using Chart.js
    var ctx = document.getElementById('lineChart').getContext('2d');
    new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
        datasets: [{
          label: 'Event Count',
          data: eventCounts,
          fill: false,
          borderColor: 'blue',
          tension: 0.1
        }]
      },
      options: {
        scales: {
          x: {
            display: true,
            title: {
              display: true,
              text: 'Month'
            }
          },
          y: {
            display: true,
            title: {
              display: true,
              text: 'Event Count'
            }
          }
        }
      }
    });
  </script>
</body>
</html>

