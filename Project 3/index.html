<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Tornados Line Chart</title>
	<!-- Include charting library -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.min.js"></script>
</head>
<body>
	<!-- Create a canvas element for the chart -->
	<canvas id="chart"></canvas>

	<script>
		// Load the GeoJSON data
		fetch("static/Resources/Tornado_Tracks.geojson")
			.then(response => response.json())
			.then(data => {
				// Extract data for given year and state
				const year = 2010; // replace with pull down year
				const yearData = data.features.filter(feature => new Date(feature.properties.date).getFullYear() === year);
        //const state = TX; // replace with pull down state
        

				// Calculate sum for each month
				const monthlySum = new Array(12).fill(0); // initialize array with zeros
				yearData.forEach(feature => {
					const month = new Date(feature.properties.date).getMonth();
					monthlySum[month]++;
				});

				// Create the chart
				const chartCanvas = document.getElementById("chart");
				new Chart(chartCanvas, {
					type: "line",
					data: {
						labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
						datasets: [{
							label: `${year} Tornado Totals`,
							data: monthlySum,
							borderColor: "blue",
							fill: false
						}]
					},
					options: {
						scales: {
							y: {
								beginAtZero: true
							}
						}
					}
				});
			});
	</script>
</body>
</html>
